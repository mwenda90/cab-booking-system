<!DOCTYPE html>
<html >
  <head>
    <meta charset="UTF-8">
    <title>Driver</title>
    <link href='http://fonts.googleapis.com/css?family=Titillium+Web:400,300,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/normalize.css">    
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  </head>
  <body style="background: #c1bdba">
    <div class="form" style="max-width:1200px">
        <div class="container" style="padding-right:60px">
        <nav class="navbar navbar-default">
          <div class="container-fluid">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">Driver</a>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                  <li><a><b>Welcome!</b></a></li>
                <li class="dropdown">
                  <a class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                      <span class="glyphicon glyphicon-user" aria-hidden="true"></span>
                      Driver<span class="caret"></span>
                  </a>
                  <ul class="dropdown-menu">
                    <li>
                        <a href="driver_edit_profile.html">
                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                            Edit Profile
                        </a>
                    </li>
                    <li role="separator" class="divider"></li>
                    <li>
                        <a href="python/driver_logout.py">
                            <span class="glyphicon glyphicon-off" aria-hidden="true"></span>
                            Logout
                        </a>
                    </li>
                  </ul>
                </li>
              </ul>
            </div><!-- /.navbar-collapse -->
          </div><!-- /.container-fluid -->
        </nav>
        <div class="jumbotron">
            <ul class="nav nav-tabs">
              <li class="active"><a data-toggle="tab" href="#ride_now">Drive Now!</a></li>
              <li><a id="tb_ride_history" data-toggle="tab" href="#ride_history">History</a></li>
            </ul>

            <div id="driver_tabs" class="tab-content">
              <div id="ride_now" class="tab-pane fade in active">
                <h3>HOME</h3>
                <p>Some content.</p>
              </div>
              <div id="ride_history" class="tab-pane fade">
                <h3>&nbsp;</h3>
                <div id="driver_history_msg"><p>Summary of undertaken rides</p></div>
                <table id="table_driver_history"class=table> 
                    <thead> 
                        <tr> 
                            <th>#</th> 
                            <th>Customer</th> 
                            <th>Date</th> 
                            <th>Source</th> 
                            <th>Destination</th> 
                            <th>Pickup Time</th>
                            <th>Deliver Time</th>
                            <th>Distance</th> 
                            <th>Amount</th> 
                        </tr> 
                    </thead> 
                    <tbody id="results"> 
                        <tr> 
                            <th scope=row>1</th> 
                            <td>[Customer]</td> 
                            <td>[Date]</td> 
                            <td>[Source]</td> 
                            <td>[Destination]</td> 
                            <td>[Up Time]</td> 
                            <td>[Down Time]</td> 
                            <td>[Distance]</td> 
                            <td>[Amount]</td> 
                        </tr> 
                    </tbody> 
                </table> 
              </div>
              <div id="menu2" class="tab-pane fade">
                <h3>Menu 2</h3>
                <p>Some content in menu 2.</p>
              </div>
            </div>
        </div>
        </div>
    </div>
    <!--<script src='https://code.jquery.com/jquery-3.1.0.min.js'></script>-->
    <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="js/index.js"></script>
    <script>
         $('#tb_ride_history').click(function(e){
            var did = '0';
            var formURL = 'python/driver_history.py';
            var data = {
                did:did
            }
            $.ajax({   
                    url : formURL,
                    type: "POST",
                    data : data,
                    dataType: 'json',
                    success: function (data) {
                                         if(data!=''){
                                            $("#table_driver_history tbody > tr").remove(); 
                                            $('#driver_history_msg').html(data.length+' records found');
                                            for(var i=0;i<data.length;i++){
                                                $('#table_driver_history > tbody:last-child').append('<tr><td>'+(i+1)+'</td><td>'+data[i][0]+'</td><td>'+data[i][1]+'</td><td>'+data[i][2]+'</td><td>'+data[i][3]+'</td><td>'+data[i][4]+'</td><td>'+data[i][5]+'</td><td>'+data[i][6]+'</td><td>'+data[i][7]+'</td></tr>');
                                            };
                                         }else{
                                             $('#driver_history_msg').html('no records found');
                                             $("#table_driver_history tbody > tr").remove(); 
                                         }
                                    }
            });
            e.preventDefault();
         })
    </script>
  </body>
</html>